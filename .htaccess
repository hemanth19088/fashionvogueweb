Options -MultiViews

# Pretty URLs: hide .php extensions and support clean routes (works in root or subdirectory)
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Redirect /index (no extension) to site root
  RewriteRule ^index/?$ / [R=301,L]

  # 1) Redirect index.php to the directory root
  RewriteCond %{THE_REQUEST} \s/+[^\s\?]*index\.php[\s\?] [NC]
  RewriteRule ^index\.php$ / [R=301,L]

  # 2) Redirect any explicit .php request to extensionless URL
  RewriteCond %{THE_REQUEST} \s/+[^\s\?]*\.php[\s\?] [NC]
  RewriteRule ^(.+)\.php$ $1 [R=301,L]

  # 3) Bypass existing files/directories (assets, images, css, js, etc.)
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule . - [L]

  # 4) Internally map extensionless URL to existing .php file
  RewriteCond %{REQUEST_FILENAME}.php -f
  RewriteRule ^(.+)$ $1.php [L]
</IfModule>

# Ensure index.php is a default directory index
DirectoryIndex index.php index.html